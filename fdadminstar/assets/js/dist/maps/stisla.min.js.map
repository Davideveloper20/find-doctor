{"version":3,"sources":["stisla.js"],"names":["$","options","size","center","animation","title","closeButton","header","bodyClass","footerClass","body","buttons","autoFocus","created","appended","onFormSubmit","modal","i","trigger_class","trigger_button","length","part","remove","modal_template","this_button","modal_form","id","item","startProgress","stopProgress","form_submit_btn","form_object","document","on","extend","dismiss","dismissText","onDismiss","addClass","btn_dismiss","call","me","append","cardProgressDismiss","chatCtrl","chat","type","timeout","onShow","spinner","append_element","setTimeout","target","target_height","jQuery","dismissed","position","text","time","moment","picture","element","typing_element","scrollTop"],"mappings":"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","file":"../stisla.min.js","sourcesContent":["\"use strict\";\n\n(function($, window, i) {\n  // Bootstrap 4 Modal\n  $.fn.fireModal = function(options) {\n    var options = $.extend({\n      size: 'modal-md',\n      center: false,\n      animation: true,\n      title: 'Modal Title',\n      closeButton: true,\n      header: true,\n      bodyClass: '',\n      footerClass: '',\n      body: '',\n      buttons: [],\n      autoFocus: true,\n      created: function() {},\n      appended: function() {},\n      onFormSubmit: function() {},\n      modal: {}\n    }, options);\n\n    this.each(function() {\n      i++;\n      var id = 'fire-modal-' + i,\n        trigger_class = 'trigger--' + id,\n        trigger_button = $('.' + trigger_class);\n\n      $(this).addClass(trigger_class);\n\n      // Get modal body\n      let body = options.body;\n\n      if(typeof body == 'object') {\n        if(body.length) {\n          let part = body;\n          body = body.removeAttr('id').clone().removeClass('modal-part');\n          part.remove();\n        }else{\n          body = '<div class=\"text-danger\">Modal part element not found!</div>';\n        }\n      }\n\n      // Modal base template\n      var modal_template = '   <div class=\"modal'+ (options.animation == true ? ' fade' : '') +'\" tabindex=\"-1\" role=\"dialog\" id=\"'+ id +'\">  '  + \n                 '     <div class=\"modal-dialog '+options.size+(options.center ? ' modal-dialog-centered' : '')+'\" role=\"document\">  '  + \n                 '       <div class=\"modal-content\">  '  + \n                 ((options.header == true) ?\n                 '         <div class=\"modal-header\">  '  + \n                 '           <h5 class=\"modal-title\">'+ options.title +'</h5>  '  + \n                 ((options.closeButton == true) ?\n                 '           <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">  '  + \n                 '             <span aria-hidden=\"true\">&times;</span>  '  + \n                 '           </button>  '\n                 : '') + \n                 '         </div>  '\n                 : '') +\n                 '         <div class=\"modal-body\">  '  + \n                 '         </div>  '  +\n                 (options.buttons.length > 0 ?\n                 '         <div class=\"modal-footer\">  '  + \n                 '         </div>  '  \n                 : '')+ \n                 '       </div>  '  + \n                 '     </div>  '  + \n                 '  </div>  ' ; \n\n      // Convert modal to object\n      var modal_template = $(modal_template);\n\n      // Start creating buttons from 'buttons' option\n      var this_button;\n      options.buttons.forEach(function(item) {\n        // get option 'id'\n        let id = \"id\" in item ? item.id : '';\n\n        // Button template\n        this_button = '<button type=\"'+ (\"submit\" in item && item.submit == true ? 'submit' : 'button') +'\" class=\"'+ item.class +'\" id=\"'+ id +'\">'+ item.text +'</button>';\n\n        // add click event to the button\n        this_button = $(this_button).off('click').on(\"click\", function() {\n          // execute function from 'handler' option\n          item.handler.call(this, modal_template);\n        });\n        // append generated buttons to the modal footer\n        $(modal_template).find('.modal-footer').append(this_button);\n      });\n\n      // append a given body to the modal\n      $(modal_template).find('.modal-body').append(body);\n\n      // add additional body class\n      if(options.bodyClass) $(modal_template).find('.modal-body').addClass(options.bodyClass);\n\n      // add footer body class\n      if(options.footerClass) $(modal_template).find('.modal-footer').addClass(options.footerClass);\n      \n      // execute 'created' callback\n      options.created.call(this, modal_template, options);\n\n      // modal form and submit form button\n      let modal_form = $(modal_template).find('.modal-body form'),\n        form_submit_btn = modal_template.find('button[type=submit]');\n\n      // append generated modal to the body\n      $(\"body\").append(modal_template);\n\n      // execute 'appended' callback\n      options.appended.call(this, $('#' + id), modal_form, options);\n\n      // if modal contains form elements\n      if(modal_form.length) {\n        // if `autoFocus` option is true\n        if(options.autoFocus) {\n          // when modal is shown\n          $(modal_template).on('shown.bs.modal', function() {\n            // if type of `autoFocus` option is `boolean`\n            if(typeof options.autoFocus == 'boolean')\n              modal_form.find('input:eq(0)').focus(); // the first input element will be focused\n            // if type of `autoFocus` option is `string` and `autoFocus` option is an HTML element\n            else if(typeof options.autoFocus == 'string' && modal_form.find(options.autoFocus).length) \n              modal_form.find(options.autoFocus).focus(); // find elements and focus on that\n          });\n        }\n\n        // form object\n        let form_object = {\n          startProgress: function() {\n            modal_template.addClass('modal-progress');\n          },\n          stopProgress: function() {\n            modal_template.removeClass('modal-progress');\n          }\n        };\n\n        // if form is not contains button element\n        if(!modal_form.find('button').length) $(modal_form).append('<button class=\"d-none\" id=\"'+ id +'-submit\"></button>');\n\n        // add click event\n        form_submit_btn.click(function() {\n          modal_form.submit();\n        });\n\n        // add submit event\n        modal_form.submit(function(e) {\n          // start form progress\n          form_object.startProgress();\n\n          // execute `onFormSubmit` callback\n          options.onFormSubmit.call(this, modal_template, e, form_object);\n        });\n      }\n\n      $(document).on(\"click\", '.' + trigger_class, function() {\n        $('#' + id).modal(options.modal);\n        \n        return false;\n      });\n    });\n  }\n\n  // Bootstrap Modal Destroyer\n  $.destroyModal = function(modal) {\n    modal.modal('hide');\n    modal.on('hidden.bs.modal', function() {\n    });\n  }\n\n  // Card Progress Controller\n  $.cardProgress = function(card, options) {\n    var options = $.extend({\n      dismiss: false,\n      dismissText: 'Cancel',\n      spinner: true,\n      onDismiss: function() {}\n    }, options);\n\n    var me = $(card);\n\n    me.addClass('card-progress');\n    if(options.spinner == false) {\n      me.addClass('remove-spinner');\n    }\n\n    if(options.dismiss == true) {\n      var btn_dismiss = '<a class=\"btn btn-danger card-progress-dismiss\">'+options.dismissText+'</a>';\n      btn_dismiss = $(btn_dismiss).off('click').on('click', function() {\n        me.removeClass('card-progress');\n        me.find('.card-progress-dismiss').remove();\n        options.onDismiss.call(this, me);\n      });\n      me.append(btn_dismiss);\n    }\n\n    return {\n      dismiss: function(dismissed) {\n        $.cardProgressDismiss(me, dismissed);\n      }\n    };\n  }\n\n  $.cardProgressDismiss = function(card, dismissed) {\n    var me = $(card);\n    me.removeClass('card-progress');\n    me.find('.card-progress-dismiss').remove();   \n    if(dismissed)\n      dismissed.call(this, me);\n  }\n\n  $.chatCtrl = function(element, chat) {\n    var chat = $.extend({\n      position: 'chat-right',\n      text: '',\n      time: moment(new Date().toISOString()).format('hh:mm'),\n      picture: '',\n      type: 'text', // or typing\n      timeout: 0,\n      onShow: function() {}\n    }, chat);\n\n    var target = $(element),\n        element = '<div class=\"chat-item '+chat.position+'\" style=\"display:none\">' +\n                  '<img src=\"'+chat.picture+'\">' +\n                  '<div class=\"chat-details\">' +\n                  '<div class=\"chat-text\">'+chat.text+'</div>' +\n                  '<div class=\"chat-time\">'+chat.time+'</div>' +\n                  '</div>' +\n                  '</div>',\n        typing_element = '<div class=\"chat-item chat-left chat-typing\" style=\"display:none\">' +\n                  '<img src=\"'+chat.picture+'\">' +\n                  '<div class=\"chat-details\">' +\n                  '<div class=\"chat-text\"></div>' +\n                  '</div>' +\n                  '</div>';\n\n      var append_element = element;\n      if(chat.type == 'typing') {\n        append_element = typing_element;\n      }\n\n      if(chat.timeout > 0) {\n        setTimeout(function() {\n          target.find('.chat-content').append($(append_element).fadeIn());\n        }, chat.timeout);\n      }else{\n        target.find('.chat-content').append($(append_element).fadeIn());\n      }\n\n      var target_height = 0;\n      target.find('.chat-content .chat-item').each(function() {\n        target_height += $(this).outerHeight();\n      });\n      setTimeout(function() {\n        target.find('.chat-content').scrollTop(target_height, -1);\n      }, 100);\n      chat.onShow.call(this, append_element);\n      target.animate({ scrollTop: target.prop(\"scrollHeight\")}, 300);\n  }\n  \n})(jQuery, this, 0);\n\n"]}
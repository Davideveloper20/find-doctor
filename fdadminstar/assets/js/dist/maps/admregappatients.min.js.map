{"version":3,"sources":["admregappatients.js"],"names":["moment","locale","$","extend","patientChangeStatus","$check","console","solstar","$this","Cancelar","resp","checked","alertify","warning","message","err","url","almacen","method","json","data","fullname","i","profileimage","satatuschoice","parseInt","columns","class","on"],"mappings":"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","file":"../admregappatients.min.js","sourcesContent":["\"use strict\";\nmoment().locale('es');\n$(function(){\n  $.extend(true, $.fn, {\n    patientChangeStatus: function(evt) {\n      var $check = this[0].checked;\n      var $this = this[0];\n\n      console.log('doctorChangeStatus', this, $(this).data());\n      console.log('doctorChangeStatus 2', $this, $check, evt);\n      solstar.jqc_alert('Cambio de Estatus!','Â¿Confirma que desea cambiar a status <b>'+($this.checked ? 'Activo': 'Inactivo')+'</b> este paciente de la app?','modern',($this.checked ? 'fas fa-toggle-on': 'fas fa-toggle-off')+' fa-1x', ($this.checked ? 'blue': 'red'), {\n        Cancelar: function(){$this.checked = !$check;},\n        \"Si, Cambiar!\": function() {\n          solstar.ajaxRequest(`Admin/PatientChgStatus/${$check?1:0}`, 'POST', function(resp) {\n              if(resp.success) {\n                \n              } else {\n                $this.checked = !$check;\n                alertify.warning(resp.message, 10);\n              }\n            }, $($this).data(), true, null, function(err) {\n              $this.checked = !$check;\n              alertify.warning('Ha ocurrido un error! '+(err.message || ''), 10);\n            }\n          );\n        }\n      });\n    }\n  });\n  \n  $(\"#dtDatatable\").dataTable({\n    ajax: {\n      url: solstar.params.almacen+'Admin/Patients-User',\n      method: \"POST\",\n      \"dataSrc\": function ( data ) {\n        var json = data.data;\n        //console.log('dataSrc', json)\n        for ( var i=0, ien=json.length ; i<ien ; i++ ) {\n          json[i].number = i+1;\n          json[i].fullname = json[i].fullname;\n          json[i].contacto = '<i class=\"fas fa-mobile-alt\"></i>: '+(json[i].phonenumber || '') + '<hr><i class=\"fas fa-at\"></i>: '+(json[i].email || '');\n          json[i].document = '<i class=\"far fa-id-card\"></i>: <b>'+(json[i].type_docabrev || '') + '</b>'+(json[i].document || '');\n          json[i].profileimage = '<img src=\"'+(json[i].profileimage || 'assets/images/icon.png') + '\" class=\"img img-responsive img-fluid profimg\" style=\"width:80px;\"/>';\n\n          json[i].satatuschoice = '<label class=\"custom-switch mt-1\"><span class=\"custom-switch-description\"></span><input type=\"checkbox\" id=\"doctorstaus'+json[i].iddoctor+'\" data-iddoctor=\"'+json[i].idusers+'\" data-idusers=\"'+json[i].idusers+'\" name=\"doctorstaus'+json[i].iddoctor+'\" '+(parseInt(json[i].idstatus) == 1 ? 'checked' : '')+' class=\"custom-switch-input doctorChangeStatus\"><span class=\"custom-switch-indicator\"></span></label>';\n          json[i].actions = '';\n          //console.log(json[i])\n        }\n        return json;\n      }\n    },\n    \"bSort\": false,\n    columns: [\n        { data: \"number\", class: \"dt-center text-right\" },\n        { data: \"profileimage\", class: \"dt-center text-center\"  },\n        { data: \"fullname\", class: \"dt-center text-left\"  },\n        { data: \"document\", class: \"dt-center text-left\" },\n        { data: \"contacto\", class: \"dt-center text-left\" },\n        { data: \"satatuschoice\", class: \"dt-center text-left\" },\n        { data: \"actions\", class: \"dt-center text-center\" },\n    ],\n    \"columnDefs\": [\n      //{ \"sortable\": false, \"targets\": [2,3] }\n    ]\n  })\n  .on( 'preDraw', function () {\n  })\n  .on( 'draw.dt', function () {\n    $('.doctorChangeStatus').off('change').on('change', function(evt) {\n        $(this).patientChangeStatus(evt);\n    });\n  })\n  .on( 'page.dt', function () {\n    $('.doctorChangeStatus').off('change').on('change', function(evt) {\n        $(this).patientChangeStatus(evt);\n    });\n  });\n\n});"]}